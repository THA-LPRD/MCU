<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upload Form</title>
</head>
<body>
<h2>Upload Image Data</h2>
<form id="uploadForm">
    <label for="packageCount">Select Package Count:</label>
    <select id="packageCount" name="packageCount">
        <option value="10">10</option>
        <option value="50">50</option>
        <option value="100">100</option>
        <option value="500">500</option>
        <option value="100000">100000</option>
    </select>
    <label for="width">Width:</label>
    <input type="number" id="width" name="width" value="800">
    <label for="height">Height:</label>
    <input type="number" id="height" name="height" value="480">
    <button type="submit">Submit</button>
</form>

<script>
    document.getElementById('uploadForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const packageCount = parseInt(document.getElementById('packageCount').value, 10);
        const width = document.getElementById('width').value;
        const height = document.getElementById('height').value;

        // Generate dummy binary data for the image
        const byteArray = new Uint8Array(packageCount).fill(85); // Using 85 as dummy byte value

        // Use FormData to construct the multipart request
        const formData = new FormData();
        formData.append('file_upload', new Blob([byteArray]), 'image.dat');
        formData.append('width', width);
        formData.append('height', height);

        fetch('/api/v1/uploadbmp', {
            method: 'POST',
            body: formData // Sending as FormData, no need to set Content-Type; it will be set automatically with the boundary parameter
        })
            .then(response => response.text()) // Adjust this according to the response type you are expecting
            .then(data => {
                console.log('Success:', data);
            })
            .catch((error) => {
                console.error('Error:', error);
            });
    });
</script>
</body>
</html>
